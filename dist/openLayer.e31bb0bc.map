{"version":3,"sources":["index.js"],"names":["map","mapLat","mapLng","mapDefaultZoom","$","document","ready","initialize_map","ol","Map","target","layers","layer","Tile","source","OSM","url","view","View","center","proj","fromLonLat","zoom","jqxhr","getJSON","data","each","coodinatesArray","idx","obj","add_map_point","lat","lng","name","beachName","vectorLayer","Vector","features","Feature","geometry","geom","Point","transform","parseFloat","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","scale","src","text","Text","font","fill","Fill","color","stroke","Stroke","width","addLayer","on","onMoveEnd","evt","feature","forEachFeatureAtPixel","pixel","window","open","N","mapEvent","getView","getZoom","removeAllFeature","getLayers","getArray","length","layerArray","len","i","type","removeLayer"],"mappings":"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","file":"openLayer.e31bb0bc.map","sourceRoot":"..","sourcesContent":["\r\n// import {click, pointerMove, altKeyOnly} from 'ol/events/condition.js';\r\n// import Select from 'ol/interaction/Select.js';\r\n\r\n\r\n\r\nvar map;\r\n\r\nvar mapLat = 40.416775;\r\nvar mapLng = -3.703790;\r\nvar mapDefaultZoom = 6;\r\n\r\n$( document ).ready(function() {\r\n  initialize_map();\r\n});\r\n\r\nfunction initialize_map() {\r\n  map = new ol.Map({\r\n    target: \"map\",\r\n    layers: [\r\n    new ol.layer.Tile({\r\n      source: new ol.source.OSM({\r\n          url: \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n          // imagerySet: 'Aerial'\r\n      })\r\n    })\r\n    ],\r\n    view: new ol.View({\r\n      center: ol.proj.fromLonLat([mapLng, mapLat]),\r\n      //minZoom: 9,\r\n      //maxZoom: 13,\r\n      zoom: mapDefaultZoom\r\n    })\r\n  });\r\n\r\n  var jqxhr = $.getJSON( \"../json/coordinates.json\", function(data) {\r\n    $.each(data.coodinatesArray, function(idx, obj) {\r\n      add_map_point(obj.lat, obj.lng, obj.name, obj.url);\r\n    });\r\n  });\r\n  //add_map_point(43.4092831, -2.7036664);\r\n}\r\n\r\nfunction add_map_point(lat, lng, beachName, url) {\r\n  var vectorLayer = new ol.layer.Vector({\r\n    source:new ol.source.Vector({\r\n      features: [new ol.Feature({\r\n        name: beachName,\r\n        url: url,\r\n        geometry: new ol.geom.Point(ol.proj.transform([parseFloat(lng), parseFloat(lat)], 'EPSG:4326', 'EPSG:3857')),\r\n      })]\r\n    }),\r\n      style: new ol.style.Style({\r\n        image: new ol.style.Icon({\r\n          anchor: [0.5, 0.5],\r\n          anchorXUnits: \"fraction\",\r\n          anchorYUnits: \"fraction\",\r\n          //size: [250, 200],\r\n          scale: 0.015,\r\n          src: \"/images/icon_marker.svg\"\r\n          //src: \"https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg\"\r\n        }),\r\n        text: new ol.style.Text({\r\n          font: '12px Calibri,sans-serif',\r\n          fill: new ol.style.Fill({ color: '#000' }),\r\n          stroke: new ol.style.Stroke({\r\n            color: '#fff', width: 2\r\n          }),\r\n          // text: map.getView().getZoom() > 10 ? \"hi\" : 'Bye'\r\n          // get the text from the feature - `this` is ol.Feature\r\n          // and show only under certain resolution\r\n          //text: map.getView().getZoom() > 8 ? beachName : ''\r\n        })\r\n    })\r\n  });\r\n  map.addLayer(vectorLayer);\r\n  map.on('moveend', onMoveEnd);\r\n\r\n  map.on('click', function(evt) {\r\n    var feature = map.forEachFeatureAtPixel(evt.pixel,\r\n      function(feature, layer) {\r\n        window.open(feature.N.url);\r\n      });\r\n  });\r\n}\r\n\r\nfunction onMoveEnd(evt) {\r\n  var mapEvent = evt.map;\r\n\r\n  if (mapEvent.getView().getZoom() < 6) {\r\n    removeAllFeature();\r\n  } else {\r\n    if (map.getLayers().getArray().length == 1) {\r\n      var jqxhr = $.getJSON( \"../json/coordinates.json\", function(data) {\r\n        $.each(data.coodinatesArray, function(idx, obj) {\r\n          add_map_point(obj.lat, obj.lng, obj.name, obj.url);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\r\n//Vector only\r\nfunction removeAllFeature() {\r\n  var layerArray, len, layer;\r\n  layerArray = map.getLayers().getArray(),\r\n  len = layerArray.length;\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    layer = layerArray[i];\r\n    if (layer.type == 'VECTOR') {\r\n      map.removeLayer(layer);\r\n    }\r\n  }\r\n}"]}